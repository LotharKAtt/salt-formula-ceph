{% set osd = salt['grains.filter_by']({
    'Debian': {
        'pkgs': ['ceph', 'ceph-common'],
        'services': [],
    },
    'RedHat': {
        'pkgs': ['ceph'],
        'services': [],
    },
}, merge=salt['pillar.get']('ceph:osd')) %}

{% set mon = salt['grains.filter_by']({
    'Debian': {
        'pkgs': ['ceph', 'ceph-common'],
        'services': [],
    },
    'RedHat': {
        'pkgs': ['ceph', 'ceph-common'],
        'services': [],
    },
}, merge=salt['pillar.get']('ceph:mon')) %}

{% set client = salt['grains.filter_by']({
    'Debian': {
        'pkgs': ['ceph-common'],
    },
    'RedHat': {
        'pkgs': ['ceph-common'],
    },
}, merge=salt['pillar.get']('ceph:client')) %}

{% set radosgw = salt['grains.filter_by']({
    'Debian': {
        'pkgs': ['ceph-common','radosgw','python-rados','librados2'],
        'services': ['radosgw-all'],
    },
    'RedHat': {
        'pkgs': ['ceph-common','radosgw'],
        'services': ['radosgw-all'],
    },
}, merge=salt['grains.filter_by']({
    'xenial': {
        'services': ['ceph-radosgw@rgw.' + salt['grains.get']('host')],
    },
}, grain='oscodename', merge=salt['pillar.get']('ceph:radosgw'))) %}

{#- vim:ft=sls
-#}
